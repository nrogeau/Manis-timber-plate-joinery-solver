# <img src="https://user-images.githubusercontent.com/57152105/137743447-f8981e9f-161f-4c39-b6a4-7e3ab0330f6a.png" width="60"> Manis 
 
A collaborative design tool for integrally-attached timber plate structures.

* [Introduction](#introduction)
* [For users](#for-users)
* [For developers](#for-developers)

## Introduction

### Tool purpose
Manis is a grasshopper plugin developed at the laboratory for timber constructions (IBOIS, EPFL) for creating joints between timber panels .
The tool allows:
* generating **joints geometry** according to topological constraints and assembly sequence
* generating **CNC cutting toolpath** to automate the fabrication of the plates
* generating **robotic trajectories** to automate the assembly of the plates
* generating **finite element models** suitable for structural analysis

As images are often more powerfull than words, have a look at our [short trailer](https://vimeo.com/635101614) if you didn't see it yet!

### Reference
For research applications, please refer to the following publication. It includes a detailed description of the algorithms behind the code: 
> __Nicolas Rogeau, Pierre Latteur, Yves Weinand, _An integrated design tool for timber plate structures to generate joints geometry, fabrication toolpath, and robot trajectories_, Automation in Construction, Volume 130, October 2021__
> [https://doi.org/10.1016/j.autcon.2021.103875](https://doi.org/10.1016/j.autcon.2021.103875)

## For users

### Plugin installation
Download and execute the installer `Manis_2.0.0_Installer.exe`. It will install the following files:
1. All Manis components as user objects in `C:\Users\yourname\AppData\Roaming\Grasshopper\UserObjects`
2. The python source code of Manis in `C:\Users\yourname\.rhinocode\py27-rh8\Lib`
3. Example files and license in `C:\Users\yourname\AppData\Roaming\Grasshopper\Libraries`
4. IBOIS robot xml file and 3D model in `C:\Users\yourname\Documents\Robots`

### Plugin dependencies

**Robots**: To simulate robot trajectories generated by Manis, we rely on the plugin ["Robots"](https://github.com/visose/Robots). The latest release of robots is available [here](https://github.com/visose/Robots/releases). You can replace IBOIS robot with your own model in this folder: `C:\Users\yourname\Documents\Robots`.

### Plugin structure
The plugin has 9 different tabs:
* _Adjacency_: where you can get useful data about how the plates of the model are connected.
* _Constraints_: where you can create your own insertion constraints 
* _Joints_: where you can create different kind of joints between adjacent plates. 
* _Properties_: where you can access the geometric properties of each plate (contour, face, thickness...).
* _Robotics_: where you can generate robotic trajectories and simulate the robotic assembly of the plates using [Robots](https://github.com/visose/Robots) plugin.
* _Solver_: where you can find the component to build the model, get modules, and other computationally intensive solvers.
* _Transform_: where you can rearrange the plates in the 3D space (for example for fabrication or assembly purposes).
* _Utility_: where you can find other usefull components that couldn't find a place in the other tabs...

### Example files and tutorials
The file `manis_demo.gh` contains some examples showing different applications of the joinery solver.
A video tutorial is also available on IBOIS vimeo channel. The [first part](https://vimeo.com/635110679) focuses on the 3D modeling of the joints and the concept of modular assemblies while [the second part](https://vimeo.com/635112019) covers the generation of CNC toolpath and robot trajectories.

## For developers

### Code structure
The source code for Manis consists of one single (too long) python file: `platesjoineryR8.py`. It is split in 4 classes:
* _PlateModel_: The main class of the solver. A plate model instance is created for each new timber plate structures. Adjacencies and insertion vectors are computed during the instanciation of the plate model. This class also containts methods to create timber joints and generate fabrication toolpath.
* _PlateModule_: A sub-class of the plate model to deal with modular assemblies. For each group of plates specified by the user, a new module is created.
* _Plate_: A sub-class of the plate model containing the information about a single element of the structure. An instance of the plate class contains geometric information such as the plate thickness or the plate contours.
* _Toolbox_: A list of methods extending the Rhino framework. 

Manis is an open source plugin, feel free to improve the code, add functions to create new joints... and don't hesitate to share it with us!
